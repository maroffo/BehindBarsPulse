{% if results %}
<div class="search-results">
    <p class="results-count">{{ results | length }} risultat{% if results | length == 1 %}o{% else %}i{% endif %} trovat{% if results | length == 1 %}o{% else %}i{% endif %}</p>

    <div class="results-list">
        {% for result in results %}
        <article class="result-card">
            <div class="result-header">
                {% if result.article.category %}
                <span class="article-category">{{ result.article.category }}</span>
                {% endif %}
                <span class="similarity-score" title="Rilevanza: {{ (result.similarity * 100) | round(1) }}%">
                    {{ (result.similarity * 100) | round | int }}% correlato
                </span>
            </div>
            <h2 class="result-title">
                <a href="/article/{{ result.article.id }}">{{ result.article.title }}</a>
            </h2>
            <p class="article-meta">
                {% if result.article.author %}<span class="author">{{ result.article.author }}</span>{% endif %}
                {% if result.article.author and result.article.source %} · {% endif %}
                {% if result.article.source %}<span class="source">{{ result.article.source }}</span>{% endif %}
                {% if result.article.published_date %}
                · <time>{{ result.article.published_date.strftime('%d/%m/%Y') }}</time>
                {% endif %}
            </p>
            {% if result.article.summary %}
            <p class="result-summary">{{ result.article.summary }}</p>
            {% endif %}
        </article>
        {% endfor %}
    </div>
</div>
{% elif query %}
<div class="no-results">
    <p>Nessun risultato trovato per "{{ query }}".</p>
    <p class="no-results-hint">Prova con termini diversi o più generici.</p>
</div>
{% else %}
<div class="search-placeholder">
    <p>Inserisci una query per cercare negli articoli.</p>
</div>
{% endif %}
